<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Si√™u Tr√≠ Nh·ªõ H·∫£i S·∫£n - Auto Fit</title>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Roboto:wght@700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; user-select: none; -webkit-user-select: none; }
        
        body {
            margin: 0; padding: 0; 
            height: 100vh; width: 100vw;
            background: #263238; 
            font-family: 'Roboto', sans-serif;
            display: flex; 
            flex-direction: column; 
            overflow: hidden; /* Ch·∫∑n tuy·ªát ƒë·ªëi thanh cu·ªôn */
        }

        /* --- HEADER (Chi·∫øm 15% chi·ªÅu cao m√†n h√¨nh) --- */
        .scoreboard {
            height: 15vh; /* C·ªë ƒë·ªãnh chi·ªÅu cao theo m√†n h√¨nh */
            width: 100%;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 2vw; 
            background: rgba(0,0,0,0.3);
            flex-shrink: 0;
        }

        .team-score {
            width: 42%; 
            height: 80%; /* Cao 80% c·ªßa header */
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 2vw; border-radius: 15px;
            font-family: 'Bangers', cursive; color: white;
            transition: 0.3s; opacity: 0.5; border: 4px solid transparent;
        }

        /* T·ª± ch·ªânh c·ª° ch·ªØ theo chi·ªÅu r·ªông m√†n h√¨nh (vw) */
        .team-score h2 { margin: 0; font-size: 2.5vmin; text-transform: uppercase; line-height: 1.2; }
        .score-num { font-size: 6vmin; color: #ffeb3b; text-shadow: 2px 2px 0 #000; }
        .vs-text { font-size: 5vmin; color: white; font-family: 'Bangers'; }

        .team-1 { background: #d32f2f; }
        .team-2 { background: #1976d2; }

        .team-score.active {
            opacity: 1; transform: scale(1.02);
            box-shadow: 0 0 15px rgba(255,255,255,0.5);
            border-color: #ffeb3b;
        }

        /* --- GAME BOARD (Chi·∫øm 85% c√≤n l·∫°i) --- */
        .game-board {
            height: 85vh;
            width: 100%;
            display: flex; 
            justify-content: center; 
            align-items: center;
            padding: 10px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* 5 C·ªôt */
            grid-template-rows: repeat(4, 1fr);    /* 4 D√≤ng */
            gap: 1.5vmin; /* Kho·∫£ng c√°ch d·ª±a tr√™n c·∫°nh nh·ªè nh·∫•t m√†n h√¨nh */
            
            /* Logic Auto-Fit: Gi·ªØ t·ª∑ l·ªá 5:4 nh∆∞ng kh√¥ng bao gi·ªù v∆∞·ª£t qu√° khung h√¨nh */
            width: min(90vw, 110vh); 
            aspect-ratio: 5/4;
        }

        .card {
            background-color: transparent;
            perspective: 1000px;
            cursor: pointer;
            position: relative;
            width: 100%; height: 100%;
        }

        .card-inner {
            position: relative; width: 100%; height: 100%;
            text-align: center; transition: transform 0.6s;
            transform-style: preserve-3d;
            border-radius: 1vmin;
            box-shadow: 0 0.5vmin 1vmin rgba(0,0,0,0.3);
        }

        .card.flipped .card-inner { transform: rotateY(180deg); }
        .card.matched .card-inner { opacity: 0; cursor: default; }

        .card-front, .card-back {
            position: absolute; width: 100%; height: 100%;
            backface-visibility: hidden;
            display: flex; align-items: center; justify-content: center;
            border-radius: 1vmin; border: 2px solid rgba(255,255,255,0.2);
        }

        .card-front {
            background: linear-gradient(135deg, #455a64, #37474f);
            color: #90a4ae; 
            font-size: 4vmin; /* C·ª° d·∫•u h·ªèi ch·∫•m */
        }

        .card-back {
            background: white; color: black;
            transform: rotateY(180deg);
            font-size: 6vmin; /* C·ª° icon to v·ª´a v·∫∑n √¥ */
        }

        /* --- MODAL --- */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9);
            display: none; flex-direction: column; justify-content: center; align-items: center;
            z-index: 100; text-align: center; color: white;
        }
        
        .btn-restart {
            padding: 1.5vh 4vw; font-size: 3vmin; background: #43a047;
            color: white; border: none; border-radius: 50px; cursor: pointer;
            font-family: 'Bangers', cursive; margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="scoreboard">
        <div class="team-score team-1 active" id="scoreBoard1">
            <h2>Team ƒê·ªè<br>(T√¥m)</h2>
            <div class="score-num" id="score1">0</div>
        </div>
        
        <div class="vs-text">VS</div>
        
        <div class="team-score team-2" id="scoreBoard2">
            <div class="score-num" id="score2">0</div>
            <h2 style="text-align:right">Team Xanh<br>(Cua)</h2>
        </div>
    </div>

    <div class="game-board">
        <div class="grid" id="grid">
            </div>
    </div>

    <div class="modal" id="endModal">
        <h1 id="winnerText" style="font-family:'Bangers'; font-size:8vmin; color:#ffeb3b; margin:0">WINNER</h1>
        <p style="font-size:3vmin">ƒê√£ l·∫≠t m·ªü h·∫øt c√°c √¥!</p>
        <button class="btn-restart" onclick="location.reload()">CH∆†I V√ÅN M·ªöI</button>
    </div>

    <audio id="sfx-flip" src="https://assets.mixkit.co/active_storage/sfx/2578/2578-preview.mp3"></audio>
    <audio id="sfx-match" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
    <audio id="sfx-fail" src="https://assets.mixkit.co/active_storage/sfx/950/950-preview.mp3"></audio>
    <audio id="sfx-win" src="https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3"></audio>

    <script>
        const ICONS = ['ü¶û', 'ü¶Ä', 'ü¶ë', 'üêô', 'ü¶ê', 'üê†', 'üêö', 'üßß', 'üí∞', 'üç∫']; 
        let cards = [], flippedCards = [], lockBoard = false, turn = 1, scores = { 1: 0, 2: 0 }, matchedPairs = 0;

        const grid = document.getElementById('grid');
        const score1El = document.getElementById('score1');
        const score2El = document.getElementById('score2');
        const board1 = document.getElementById('scoreBoard1');
        const board2 = document.getElementById('scoreBoard2');

        const sfxFlip = document.getElementById('sfx-flip');
        const sfxMatch = document.getElementById('sfx-match');
        const sfxFail = document.getElementById('sfx-fail');
        const sfxWin = document.getElementById('sfx-win');

        function playSound(audio) { audio.currentTime = 0; audio.play().catch(()=>{}); }

        function initGame() {
            let deck = [...ICONS, ...ICONS].sort(() => 0.5 - Math.random());
            grid.innerHTML = '';
            deck.forEach((icon, index) => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.dataset.icon = icon;
                card.innerHTML = `<div class="card-inner"><div class="card-front">?</div><div class="card-back">${icon}</div></div>`;
                card.addEventListener('click', function() { flipCard(this); });
                grid.appendChild(card);
            });
            updateTurnUI();
        }

        function flipCard(card) {
            if (lockBoard || card === flippedCards[0] || card.classList.contains('matched') || card.classList.contains('flipped')) return;
            card.classList.add('flipped');
            flippedCards.push(card);
            playSound(sfxFlip);
            if (flippedCards.length === 2) checkForMatch();
        }

        function checkForMatch() {
            let [c1, c2] = flippedCards;
            let isMatch = c1.dataset.icon === c2.dataset.icon;
            if (isMatch) disableCards(); else unflipCards();
        }

        function disableCards() {
            lockBoard = true;
            playSound(sfxMatch);
            setTimeout(() => {
                flippedCards.forEach(c => c.classList.add('matched'));
                scores[turn]++;
                updateScoreUI();
                matchedPairs++;
                resetBoard(true);
                if (matchedPairs === ICONS.length) endGame();
            }, 800);
        }

        function unflipCards() {
            lockBoard = true;
            playSound(sfxFail);
            setTimeout(() => {
                flippedCards.forEach(c => c.classList.remove('flipped'));
                resetBoard(false);
            }, 1000);
        }

        function resetBoard(keepTurn) {
            [flippedCards, lockBoard] = [[], false];
            if (!keepTurn) { turn = turn === 1 ? 2 : 1; updateTurnUI(); }
        }

        function updateTurnUI() {
            if (turn === 1) { board1.classList.add('active'); board2.classList.remove('active'); }
            else { board2.classList.add('active'); board1.classList.remove('active'); }
        }

        function updateScoreUI() { score1El.innerText = scores[1]; score2El.innerText = scores[2]; }

        function endGame() {
            playSound(sfxWin);
            let msg = scores[1] > scores[2] ? "üèÜ TEAM T√îM TH·∫ÆNG!" : (scores[2] > scores[1] ? "üèÜ TEAM CUA TH·∫ÆNG!" : "ü§ù HO√Ä NHAU!");
            document.getElementById('winnerText').innerText = msg;
            document.getElementById('endModal').style.display = 'flex';
        }

        initGame();
    </script>
</body>
</html>